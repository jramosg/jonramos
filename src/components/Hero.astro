---
import { Image } from 'astro:assets';
import jonRamosImg from '../assets/jonramos.jpeg';
import { getLangFromUrl, useTranslations } from '../i18n/utils';
import { getNavigationUrl } from '@/utils/navigation';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<section
  id="home"
  class="hero"
  aria-labelledby="hero-title"
  itemscope
  itemtype="https://schema.org/Person"
>
  <div class="container">
    <div class="hero-layout">
      <article class="content">
        <div class="terminal-line">
          <span class="prompt">$</span>
          <span class="command">whoami</span>
        </div>

        <h1 id="hero-title" class="name" itemprop="name">
          <span class="first">Jon</span>
          <span class="last">Ramos</span>
          {lang === 'eu' && <span class="suffix">naiz</span>}
        </h1>

        <p class="title" itemprop="jobTitle">
          {t('hero.title')}
        </p>

        <p class="description" itemprop="description">
          {t('hero.description')}
          <a
            href="https://ubikare.io/"
            target="_blank"
            rel="noopener noreferrer"
            class="highlight"
            itemprop="worksFor"
            itemscope
            itemtype="https://schema.org/Organization"
            aria-label="Ubikare company website (opens in new tab)"
            ><span itemprop="name">Ubikare</span></a
          >.
        </p>

        <!-- Hidden SEO-relevant metadata -->
        <meta itemprop="url" content="https://jonramos.dev" />
        <span
          itemprop="address"
          itemscope
          itemtype="https://schema.org/PostalAddress"
          class="visually-hidden"
        >
          <meta itemprop="addressLocality" content="Urnieta" />
          <meta itemprop="addressRegion" content="Gipuzkoa, Basque Country" />
          <meta itemprop="addressCountry" content="Spain" />
        </span>

        <nav class="actions" aria-label="Primary actions">
          <a
            href={getNavigationUrl(lang, '#projects')}
            class="btn btn-primary"
            role="button"
          >
            <span class="btn-icon">&gt;</span>
            {t('hero.viewWork')}
          </a>
          <a
            href={getNavigationUrl(lang, '#contact')}
            class="btn btn-secondary"
            role="button"
          >
            {t('hero.contactMe')}
          </a>
        </nav>
      </article>

      <figure class="image-container">
        <div class="image-frame">
          <div class="frame-corner tl"></div>
          <div class="frame-corner tr"></div>
          <div class="frame-corner bl"></div>
          <div class="frame-corner br"></div>
          <Image
            src={jonRamosImg}
            alt="Jon Ramos - Software Engineer and Full Stack Developer from Urnieta, Basque Country specializing in Clojure and modern web technologies"
            width={400}
            height={533}
            class="profile-image"
            loading="eager"
            fetchpriority="high"
            itemprop="image"
          />
        </div>
        <div class="image-label">
          <span class="label-prefix">//</span> jon_ramos.jpeg
        </div>
      </figure>
    </div>
  </div>
</section>

<style>
  .hero {
    min-height: 100vh;
    display: flex;
    align-items: center;
    padding-top: calc(var(--nav-height) + 2rem);
    padding-bottom: 4rem;
    position: relative;
    overflow: hidden;
  }

  .hero-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    align-items: center;
    gap: 4rem;
  }

  .content {
    display: flex;
    flex-direction: column;
  }

  .terminal-line {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    font-family: var(--font-mono);
    font-size: 0.9rem;
    margin-bottom: 1.5rem;
    color: var(--color-text-muted);
  }

  .prompt {
    color: var(--color-primary);
  }

  .command {
    color: var(--color-text);
    position: relative;
  }

  .command::after {
    content: '_';
    animation: blink 1s step-end infinite;
    color: var(--color-primary);
  }

  @keyframes blink {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0;
    }
  }

  .name {
    font-size: clamp(3rem, 8vw, 5rem);
    line-height: 1;
    margin-bottom: 1.5rem;
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .first {
    color: var(--color-text);
  }

  .last {
    color: var(--color-primary);
  }

  .suffix {
    font-size: 1.5rem;
    color: var(--color-text-muted);
    align-self: flex-end;
    margin-bottom: 0.5rem;
    font-weight: 400;
  }

  .title {
    font-family: var(--font-serif);
    font-size: 1.5rem;
    color: var(--color-text-muted);
    margin-bottom: 2rem;
    font-weight: 400;
    font-style: italic;
    max-width: 500px;
  }

  .description {
    font-size: 1.125rem;
    max-width: 520px;
    margin-bottom: 3rem;
    color: var(--color-text-muted);
  }

  .highlight {
    color: var(--color-secondary);
    border-bottom: 1px solid transparent;
    transition: all 0.2s var(--ease-out-expo);
  }

  .highlight:hover {
    border-bottom-color: var(--color-secondary);
  }

  .actions {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
  }

  .btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.875rem 1.75rem;
    font-family: var(--font-mono);
    font-size: 0.9rem;
    font-weight: 500;
    border-radius: 4px;
    transition: all 0.2s var(--ease-out-expo);
  }

  .btn-icon {
    color: var(--color-primary);
  }

  .btn-primary {
    background: var(--color-bg-elevated);
    color: var(--color-text);
    border: 1px solid var(--color-border-emphasis);
  }

  .btn-primary:hover {
    background: var(--color-bg-surface);
    border-color: var(--color-primary);
    transform: translateY(-2px);
  }

  .btn-secondary {
    background: transparent;
    color: var(--color-text-muted);
    border: 1px solid var(--color-border);
  }

  .btn-secondary:hover {
    color: var(--color-text);
    border-color: var(--color-border-emphasis);
  }

  /* Image Styles */
  .image-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
  }

  .image-frame {
    position: relative;
    padding: 1rem;
  }

  .frame-corner {
    position: absolute;
    width: 24px;
    height: 24px;
    border-color: var(--color-primary);
    border-style: solid;
  }

  .tl {
    top: 0;
    left: 0;
    border-width: 2px 0 0 2px;
  }

  .tr {
    top: 0;
    right: 0;
    border-width: 2px 2px 0 0;
  }

  .bl {
    bottom: 0;
    left: 0;
    border-width: 0 0 2px 2px;
  }

  .br {
    bottom: 0;
    right: 0;
    border-width: 0 2px 2px 0;
  }

  .profile-image {
    width: 100%;
    max-width: 380px;
    aspect-ratio: 400 / 533;
    border-radius: 2px;
    filter: grayscale(20%) contrast(1.05);
    transition: all 0.4s var(--ease-out-expo);
  }

  .profile-image:hover {
    filter: grayscale(0%) contrast(1);
    transform: scale(1.02);
  }

  .image-label {
    font-family: var(--font-mono);
    font-size: 0.8rem;
    color: var(--color-text-subtle);
  }

  .label-prefix {
    color: var(--color-primary);
  }

  .visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  @media (max-width: 968px) {
    .hero-layout {
      grid-template-columns: 1fr;
      text-align: center;
      gap: 3rem;
    }

    .content {
      align-items: center;
      order: 2;
    }

    .image-container {
      order: 1;
    }

    .name {
      justify-content: center;
    }

    .title,
    .description {
      text-align: center;
    }

    .actions {
      justify-content: center;
    }

    .terminal-line {
      justify-content: center;
    }

    .profile-image {
      max-width: 300px;
    }
  }

  @media (max-width: 480px) {
    .name {
      font-size: 2.5rem;
    }

    .title {
      font-size: 1.25rem;
    }

    .btn {
      width: 100%;
      justify-content: center;
    }
  }
</style>
