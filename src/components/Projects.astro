---
import ProjectCard from './ProjectCard.astro';
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const projects = [
  {
    title: 'Naiha',
    description: t('projects.naiha_desc'),
    href: 'https://www.naiha.io/',
    tags: ['Clojure', 'ClojureScript', 'Datomic'],
    type: 'WebApplication',
  },
  {
    title: 'Laguntza Fisioterapia',
    description: t('projects.laguntza_desc'),
    href: 'https://laguntzafisioterapia.com/',
    tags: ['Astro', 'GSAP', 'Typescript'],
    type: 'WebSite',
  },
  {
    title: 'Norwegian Singles',
    description: t('projects.norwegian_singles_desc'),
    href: 'https://norwegian-singles.app',
    tags: ['Astro', 'React', 'Typescript'],
    type: 'WebSite / WebApplication',
  },
  {
    title: 'Besaide Mendizale Elkartea',
    description: t('projects.besaide_desc'),
    href: 'https://besaide.vercel.app/',
    tags: ['Astro', 'Typescript'],
    type: 'WebSite',
  },
  {
    title: 'color-tools',
    description: t('projects.colortools_desc'),
    href: 'https://github.com/jramosg/color-tools',
    tags: ['Clojure', 'Library', 'Open Source'],
    type: 'SoftwareSourceCode',
  },
];
---

<section
  id="projects"
  class="section"
  aria-labelledby="projects-title"
  itemscope
  itemtype="https://schema.org/ItemList"
>
  <div class="container">
    <header>
      <h2 id="projects-title" class="section-title" itemprop="name">
        {t('projects.title')}
      </h2>
      <meta itemprop="numberOfItems" content={String(projects.length)} />
      <meta itemprop="itemListOrder" content="ItemListUnordered" />
    </header>

    <div class="grid" role="list">
      {
        projects.map((project, index) => (
          <div role="listitem" itemprop="itemListElement">
            <meta itemprop="position" content={String(index + 1)} />
            <ProjectCard {...project} />
          </div>
        ))
      }
    </div>
  </div>
</section>

<style>
  .section {
    padding: 6rem 0;
  }

  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
  }
</style>
