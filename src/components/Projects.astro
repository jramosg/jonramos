---
import ProjectCard from './ProjectCard.astro';
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const projects = [
  {
    title: 'Naiha',
    description: t('projects.naiha_desc'),
    href: 'https://www.naiha.io/',
    tags: ['Clojure', 'ClojureScript', 'Datomic'],
    type: 'WebApplication',
  },
  {
    title: 'Laguntza Fisioterapia',
    description: t('projects.laguntza_desc'),
    href: 'https://laguntzafisioterapia.com/',
    tags: ['Astro', 'GSAP', 'Typescript'],
    type: 'WebSite',
  },
  {
    title: 'Norwegian Singles',
    description: t('projects.norwegian_singles_desc'),
    href: 'https://norwegian-singles.app',
    tags: ['Astro', 'React', 'Typescript'],
    type: 'WebSite / WebApplication',
  },
  {
    title: 'Besaide Mendizale Elkartea',
    description: t('projects.besaide_desc'),
    href: 'https://besaide.vercel.app/',
    tags: ['Astro', 'Typescript'],
    type: 'WebSite',
  },
  {
    title: 'color-tools',
    description: t('projects.colortools_desc'),
    href: 'https://github.com/jramosg/color-tools',
    tags: ['Clojure', 'Library', 'Open Source'],
    type: 'SoftwareSourceCode',
  },
];
---

<section
  id="projects"
  class="section"
  aria-labelledby="projects-title"
  itemscope
  itemtype="https://schema.org/ItemList"
>
  <div class="container">
    <header class="section-header">
      <h2 id="projects-title" class="section-title" itemprop="name">
        {t('projects.title')}
      </h2>
      <p class="section-subtitle">
        A selection of projects I've built and contributed to
      </p>
      <meta itemprop="numberOfItems" content={String(projects.length)} />
      <meta itemprop="itemListOrder" content="ItemListUnordered" />
    </header>

    <div class="grid" role="list">
      {
        projects.map((project, index) => (
          <div
            role="listitem"
            itemprop="itemListElement"
            style={`animation-delay: ${index * 0.05}s`}
          >
            <meta itemprop="position" content={String(index + 1)} />
            <ProjectCard {...project} />
          </div>
        ))
      }
    </div>
  </div>
</section>

<style>
  .section {
    padding: 6rem 0;
  }

  .section-header {
    margin-bottom: 3rem;
  }

  .section-title {
    font-family: var(--font-mono);
    font-size: 2rem;
    font-weight: 600;
    color: var(--color-text);
    margin-bottom: 0.75rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .section-title::before {
    content: '//';
    color: var(--color-primary);
    font-weight: 400;
  }

  .section-subtitle {
    font-size: 1.1rem;
    color: var(--color-text-muted);
    margin: 0;
  }

  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.25rem;
  }

  .grid > div {
    animation: fadeInUp 0.4s var(--ease-out-expo) backwards;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @media (max-width: 768px) {
    .section {
      padding: 4rem 0;
    }

    .section-title {
      font-size: 1.5rem;
    }
  }
</style>
